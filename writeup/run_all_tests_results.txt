Test Run: 20250404_001559
================================================================================

Starting comprehensive tests...
Using database URL: postgresql://exchange:exchange-password@localhost/exchange
Skipping server startup - using existing server

=== Running Functional Tests ===
Connected to server at ('vcm-46933.vm.duke.edu', 12345)
--------------------------------------------------
Sent request:
173
<?xml version="1.0" encoding="UTF-8"?>
<create>
  <account id="123456" balance="1000"/>
  <symbol sym="SPY">
    <account id="123456">100000</account>
  </symbol>
</create>

Server response:
<results><error id="123456">Account already exists</error><created sym="SPY" id="123456" /></results>
--------------------------------------------------

--------------------------------------------------
Sent request:
173
<?xml version="1.0" encoding="UTF-8"?>
<create>
  <account id="123456" balance="1000"/>
  <symbol sym="SPY">
    <account id="123456">100000</account>
  </symbol>
</create>

Server response:
<results><error id="123456">Account already exists</error><created sym="SPY" id="123456" /></results>
--------------------------------------------------

--------------------------------------------------
Sent request:
58
<?xml version="1.0" encoding="UTF-8"?>
<create>
</create>

Server response:
<results />
--------------------------------------------------

--------------------------------------------------
Sent request:
134
<?xml version="1.0" encoding="UTF-8"?>
<create>
  <symbol sym="SPY">
    <account id="9999999">100000</account>
  </symbol>
</create>

Server response:
<results><error sym="SPY" id="9999999">Account 9999999 does not exist</error></results>
--------------------------------------------------

--------------------------------------------------
Sent request:
127
<?xml version="1.0" encoding="UTF-8"?>
<transactions id="123456">
  <order sym="SPY" amount="10" limit="100"/>
</transactions>

Server response:
<results><error sym="SPY" amount="10" limit="100" error="Insufficient funds" /></results>
--------------------------------------------------

--------------------------------------------------
Sent request:
127
<?xml version="1.0" encoding="UTF-8"?>
<transactions id="999999">
  <order sym="SPY" amount="10" limit="100"/>
</transactions>

Server response:
<results><error sym="SPY" amount="10" limit="100" error="Account 999999 not found" /></results>
--------------------------------------------------

--------------------------------------------------
Sent request:
205
<?xml version="1.0" encoding="UTF-8"?>
<create>
  <account id="1" balance="1000000"/>
  <account id="2" balance="1000000"/>
  <symbol sym="AMZN">
    <account id="2">100000</account>
  </symbol>
</create>

Server response:
<results><error id="1">Account already exists</error><error id="2">Account already exists</error><created sym="AMZN" id="2" /></results>
--------------------------------------------------

--------------------------------------------------
Sent request:
218
<?xml version="1.0" encoding="UTF-8"?>
<transactions id="1">
  <order sym="AMZN" amount="300" limit="125"/>
  <order sym="AMZN" amount="200" limit="127"/>
  <order sym="AMZN" amount="400" limit="125"/>
</transactions>

Server response:
<results><error sym="AMZN" amount="300" limit="125" error="Insufficient funds" /><error sym="AMZN" amount="200" limit="127" error="Insufficient funds" /><error sym="AMZN" amount="400" limit="125" error="Insufficient funds" /></results>
--------------------------------------------------

--------------------------------------------------
Sent request:
221
<?xml version="1.0" encoding="UTF-8"?>
<transactions id="2">
  <order sym="AMZN" amount="-100" limit="130"/>
  <order sym="AMZN" amount="-500" limit="128"/>
  <order sym="AMZN" amount="-200" limit="140"/>
</transactions>

Server response:
<results><opened sym="AMZN" amount="-100" limit="130" id="38650" /><opened sym="AMZN" amount="-500" limit="128" id="38651" /><opened sym="AMZN" amount="-200" limit="140" id="38652" /></results>
--------------------------------------------------

--------------------------------------------------
Sent request:
125
<?xml version="1.0" encoding="UTF-8"?>
<transactions id="2">
  <order sym="AMZN" amount="-400" limit="124"/>
</transactions>

Server response:
<results><opened sym="AMZN" amount="-400" limit="124" id="38653" /></results>
--------------------------------------------------

--------------------------------------------------
Sent request:
95
<?xml version="1.0" encoding="UTF-8"?>
<transactions id="2">
  <query id="7"/>
</transactions>

Server response:
<results><error id="7" error="Permission denied: Order belongs to another account" /></results>
--------------------------------------------------

--------------------------------------------------
Sent request:
131
<?xml version="1.0" encoding="UTF-8"?>
<transactions id="1">
  <query id="2"/>
  <query id="3"/>
  <query id="4"/>
</transactions>

Server response:
<results><error id="2" error="Permission denied: Order belongs to another account" /><error id="3" error="Permission denied: Order belongs to another account" /><error id="4" error="Permission denied: Order belongs to another account" /></results>
--------------------------------------------------

--------------------------------------------------
Sent request:
131
<?xml version="1.0" encoding="UTF-8"?>
<transactions id="2">
  <query id="5"/>
  <query id="6"/>
  <query id="7"/>
</transactions>

Server response:
<results><error id="5" error="Permission denied: Order belongs to another account" /><error id="6" error="Permission denied: Order belongs to another account" /><error id="7" error="Permission denied: Order belongs to another account" /></results>
--------------------------------------------------

--------------------------------------------------
Sent request:
203
<?xml version="1.0" encoding="UTF-8"?>
<create>
  <account id="3" balance="200000"/>
  <account id="4" balance="100000"/>
  <symbol sym="GOOG">
    <account id="4">100000</account>
  </symbol>
</create>

Server response:
<results><error id="3">Account already exists</error><error id="4">Account already exists</error><created sym="GOOG" id="4" /></results>
--------------------------------------------------

Setup failed, aborting transaction operations test
Closing client socket.

=== Running Edge Case Tests ===
Starting edge case tests...
--------------------------------------------------
Sent request:
97
<?xml version="1.0" encoding="UTF-8"?>
<create>
  <account id="zero_bal" balance="0"/>
</create>

Server response:
<results><error id="zero_bal">Account already exists</error></results>
--------------------------------------------------

--------------------------------------------------
Sent request:
132
<?xml version="1.0" encoding="UTF-8"?>
<transactions id="123456">
  <order sym="SPY" amount="1000000" limit="100"/>
</transactions>

Server response:
<results><error sym="SPY" amount="1000000" limit="100" error="Insufficient funds" /></results>
--------------------------------------------------

--------------------------------------------------
Sent request:
532
<?xml version="1.0" encoding="UTF-8"?>
<transactions id="123456">
  <order sym="SPY" amount="10" limit="100"/>
  <order sym="SPY" amount="10" limit="100"/>
  <order sym="SPY" amount="10" limit="100"/>
  <order sym="SPY" amount="10" limit="100"/>
  <order sym="SPY" amount="10" limit="100"/>
  <order sym="SPY" amount="10" limit="100"/>
  <order sym="SPY" amount="10" limit="100"/>
  <order sym="SPY" amount="10" limit="100"/>
  <order sym="SPY" amount="10" limit="100"/>
  <order sym="SPY" amount="10" limit="100"/>
</transactions>

Server response:
<results><error sym="SPY" amount="10" limit="100" error="Insufficient funds" /><error sym="SPY" amount="10" limit="100" error="Insufficient funds" /><error sym="SPY" amount="10" limit="100" error="Insufficient funds" /><error sym="SPY" amount="10" limit="100" error="Insufficient funds" /><error sym="SPY" amount="10" limit="100" error="Insufficient funds" /><error sym="SPY" amount="10" limit="100" error="Insufficient funds" /><error sym="SPY" amount="10" limit="100" error="Insufficient funds" /><error sym="SPY" amount="10" limit="100" error="Insufficient funds" /><error sym="SPY" amount="10" limit="100" error="Insufficient funds" /><error sym="SPY" amount="10" limit="100" error="Insufficient funds" /></results>
--------------------------------------------------

Edge case tests completed

=== Running Concurrency Tests ===
Error occurred during testing: 'utf-8' codec can't decode byte 0xa9 in position 1907609: invalid start byte

Using external server - no shutdown required

All tests completed!
